(function(g){"undefined"==typeof g?console.warn("Required jQuery."):g.fn.autocompleter=function(u,d){var B=function(h,l){return h};d=g.extend({maxResults:0,minChars:1,timeout:500,matchRegexp:function(h,l){return RegExp(l(h),"i")},matchValue:B,itemDisplay:d.matchValue||B,itemValue:null,hiddenValue:"",emptyValue:"",ajaxData:function(h){return{value:h}}},d);var p=this;return this.each(function(){function h(){var a=f.position();b.css({left:a.left,top:a.top+f.outerHeight(),width:f.outerWidth()})}function l(a){return a.replace(/[.*+\-?^${}()|[\]\\]/g,
"\\$&")}function D(a){v.push(1);setTimeout(function(){v.pop();v.length||a()},d.timeout)}function w(a,c){a=a.trim();a===x?c&&b.children().length&&b.show():(m.val(d.emptyValue),x=a,b.empty(),!a||a.length<d.minChars?b.hide():(p.trigger("beforeSearch",{val:a}),"String"==u.constructor.name?g.get(u,d.ajaxData(a),function(e){C(a,e)}):C(a,u)))}function C(a,c){var e=d.matchRegexp(a,l),y=RegExp("^"+l(a)+"$",e.flags),q=0,n;for(n in c){var z=c[n],A=d.matchValue(z,n),E=r?d.itemValue(z,n):A;A.match(y)&&m.val(E);
A.match(e)&&(0>=d.maxResults||q<d.maxResults)&&(b.addResultItem(z,n),q++)}p.trigger("afterSearch",{});b.children().length?b.show():b.hide()}var k=!1,r="function"==typeof d.itemValue,f=g(this),x=f.val().trim(),m=g('<input type="hidden" value="'+(d.hiddenValue||d.emptyValue)+'">'),b=g("<div>").addClass("autocompleter-result"),t=!1;f.after(b);window.addEventListener("resize",h);document.fonts.ready.then(h);h();r&&(m.attr("name",f.attr("name")),f.removeAttr("name").after(m));b.unselect=function(){b.find(".selected").removeClass("selected");
return this};b.show=function(){g.fn.show.apply(this,arguments);t=!0;b.unselect().scrollTop(0).children().first().addClass("selected");p.trigger("resultShow",{})};b.hide=function(){g.fn.hide.apply(this,arguments);t=!1;p.trigger("resultHide",{})};f.blur(function(){b.hide()});f.click(function(){w(f.val(),1)});f.on("paste",function(a){w(a.originalEvent.clipboardData.getData("text"),1)});b.mouseout(function(){k||b.unselect()});b.reselect=function(a){k=!1;b.unselect();g(a).addClass("selected")};b.addResultItem=
function(a,c){var e=d.matchValue(a,c),y=r?d.itemValue(a,c):e;e=g("<div>").addClass("autocompleter-item").attr("data-match-value",e).attr("data-value",y).html(d.itemDisplay(a,c)).mousedown(function(q){q.preventDefault()}).click(function(){b.selectVariant(g(this)).hide()}).mouseover(function(){k||b.reselect(this)}).mousemove(function(){k&&b.reselect(this)});b.append(e)};f.keyup(function(){D(function(){w(f.val())})});f.keydown(function(a){switch(a.which){case 38:a:if(t){a.preventDefault();k=!0;a=b.find(".selected").first();
if(a.length){b.unselect();var c=a.prev();if(c.length){a=c.addClass("selected").position().top;c=b.position().top-c.innerHeight();a<c&&b.scrollTop(b.scrollTop()+c+a);break a}}b.scrollTop(b.get(0).scrollHeight).children().last().addClass("selected")}break;case 40:a:if(t){event.preventDefault();k=!0;a=b.find(".selected").first();if(a.length){b.unselect();var e=a.next();if(e.length){a=b.outerHeight();c=e.addClass("selected").innerHeight();e=e.position().top+c;e>a&&b.scrollTop(b.scrollTop()+c-b.position().top-
a+e);break a}}b.scrollTop(0).children().first().addClass("selected")}else b.children().length&&b.show();break;case 13:a.preventDefault();a=b.find(".selected").first();a.length&&b.unselect().selectVariant(a);b.hide();break;case 9:b.hide();break;case 27:b.hide()}});b.selectVariant=function(a){var c=a.data("match-value");a=a.data("value");r&&m.val(a);f.val(c);x=c;b.empty();return this};var v=[]})}})(jQuery);